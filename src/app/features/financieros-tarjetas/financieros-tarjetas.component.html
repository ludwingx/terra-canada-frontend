<div class="page-container">
  <div class="page-header">
    <div class="header-title">
      <h2>{{ 'financierosTarjetas' | translate }}</h2>
      <p>{{ 'financierosTarjetasDesc' | translate }}</p>
    </div>
    <div class="header-actions">
      <button class="btn btn-secondary" (click)="toggleDocumentUpload()">
        <i class="pi pi-cloud-upload"></i>
        {{ 'subirDocumentos' | translate }}
      </button>
      <button class="btn btn-primary" (click)="togglePaymentForm()">
        <i class="pi pi-plus"></i>
        {{ 'nuevoPago' | translate }}
      </button>
    </div>
  </div>

  <div class="content-wrapper">
    <!-- Payment Form Modal -->
    <div *ngIf="showPaymentForm" class="modal-overlay" (click)="onFormCancel()">
       <div class="modal-content modal-lg" (click)="$event.stopPropagation()">
          <div class="modal-header">
              <h3>{{ selectedPaymentForEdit ? ('editarPago' | translate) : ('nuevoPago' | translate) }}</h3>
              <button class="btn-close" (click)="onFormCancel()"><i class="pi pi-times"></i></button>
          </div>
          <div class="modal-body">
             <app-payment-form
                [isVisible]="true" 
                [form]="paymentForm" 
                (submit)="onFormSubmit()"
                (cancel)="onFormCancel()">
             </app-payment-form>
          </div>
       </div>
    </div>

    <!-- Document Upload Modal -->
    <div *ngIf="showDocumentUpload" class="modal-overlay" (click)="toggleDocumentUpload()">
         <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
               <h3>{{ 'subirDocumentos' | translate }}</h3>
               <button class="btn-close" (click)="toggleDocumentUpload()"><i class="pi pi-times"></i></button>
            </div>
            <div class="modal-body">
               <app-document-upload></app-document-upload>
            </div>
         </div>
    </div>

    <!-- Main List -->
    <app-card-payment-records
      (onEdit)="onEditPayment($event)">
    </app-card-payment-records>
  </div>
</div>
